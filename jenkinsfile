pipeline {
    agent any
    stages {
      stage("Cloning GitHub Repository"){
        steps{
          git url: 'https://github.com/jokwara/DemoApplication2.git', branch: 'main'
         }

        }

     stage("Building Code"){
         steps{
          sh  "mvn clean install"
       }
     }

     stage("Testing Code"){
         steps{
          sh  "/bin/echo Testing The Code"
       }
     }

    stage("Deploying Code To Tomcat"){
         steps{
          deploy adapters: [tomcat9(credentialsId: 'dca3650a-d624-4869-8902-490854e996ca', path: '', url: 'http://192.168.1.244:9999')], contextPath: null, war: '*/**.war'
       }
     }

   stage("Code Quality Checking"){
     waitForQualityGate abortPipeline: false, credentialsId: 'real-sonar-token'
   }

  stage("Code Coverage"){
         steps{
          jacoco()
       }
     }

    }

}